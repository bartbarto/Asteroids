function init(){renderer=new THREE.WebGLRenderer({antialias:!1,alpha:!1}),renderer.setClearColor(14215167),renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(renderer.domElement),camera=new THREE.PerspectiveCamera(40,window.innerWidth/window.innerHeight,1,3e3),camera.position.y=20,controls=new THREE.FirstPersonControls(camera),controls.movementSpeed=80,controls.lookSpeed=.05,controls.lookVertical=!0,controls.allowKeys=!1,scene=new THREE.Scene,scene.fog=new THREE.FogExp2(13689072,.0025),scene.add(camera),light=new THREE.HemisphereLight(16777200,1052704,1.25),light.position.set(.75,1,.25),scene.add(light);var e=new THREE.ObjectLoader;e.load("js/island.js",function(e){console.log(e),e.scale.x=e.scale.y=e.scale.z=50,e.position.x+=400,e.rotation.y=1.57,scene.add(e)}),lastTime=performance.now(),makeRings(),document.addEventListener("keydown",function(e){switch(console.log(e.keyCode),e.keyCode){case 32:controls.autoForward=!controls.autoForward;break;case 79:controls.moveLeft=!0,console.log("leftie");break;case 80:controls.moveRight=!0,console.log("rightie");break;case 81:console.log("freezing"),controls.freeze=!controls.freeze}}),document.addEventListener("keyup",function(e){switch(e.keyCode){case 79:controls.moveLeft=!1;break;case 80:controls.moveRight=!1}})}function toggleForward(){controls.autoForward?(console.log("halt"),controls.autoForward=!1):(console.log("onwards!"),controls.autoForward=!0)}function animate(){requestAnimationFrame(animate),hitTest();var e=performance.now()/1e3;controls.update(e-lastTime),renderer.render(scene,camera),lastTime=e}function makeRings(){for(var e=[{position:{x:300,y:110,z:0},rotation:{x:0,y:1.57,z:0}},{position:{x:400,y:100,z:0},rotation:{x:0,y:1.57,z:0}},{position:{x:500,y:80,z:0},rotation:{x:0,y:1.57,z:0}},{position:{x:600,y:60,z:0},rotation:{x:0,y:1.57,z:0}},{position:{x:700,y:40,z:0},rotation:{x:0,y:1.57,z:0}},{position:{x:770,y:40,z:50},rotation:{x:0,y:1,z:0}},{position:{x:830,y:40,z:150},rotation:{x:0,y:0,z:0},"final":!0}],o=new THREE.TorusGeometry(20,3,10,10),n=new THREE.MeshBasicMaterial({color:16711680,transparent:!0,opacity:.5}),t=new THREE.MeshBasicMaterial({color:16777215,transparent:!0,opacity:.8}),i=new THREE.Mesh(o,n),r=0;r<e.length;r++){var a=i.clone();a.position.set(e[r].position.x,e[r].position.y,e[r].position.z),a.rotation.set(e[r].rotation.x,e[r].rotation.y,e[r].rotation.z),e[r].final&&(a.material=t,a.final=!0),scene.add(a),rings.push(a)}}function hitTest(){for(var e=0;e<rings.length;e++){var o=new THREE.Vector3(camera.position.x,camera.position.y,camera.position.z),n=new THREE.Vector3(rings[e].position.x,rings[e].position.y,rings[e].position.z),t=o.distanceTo(n);20>t&&1!=rings[e].hit&&(rings[e].material=new THREE.MeshBasicMaterial({color:65280,transparent:!0,opacity:.5}),rings[e].hit=!0,ringsHit++,rings[e].final&&game.win()),o.y<5&&game.over(),o=null,n=null,t=null}}var scene,camera,renderer,light,controls,lastTime,rings=[],ringsHit=0;init(),animate();var game={win:function(){console.log("uitgespeeld, je hebt door "+ringsHit+" van de "+rings.length+" ringen gevlogen")},over:function(){controls.freeze=!0},pause:function(){}};